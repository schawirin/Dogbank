# =============================================================================
# PIX Worker - Application Configuration
# =============================================================================

server.port=8090
spring.application.name=pix-worker

# =============================================================================
# Kafka Configuration
# =============================================================================
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:kafka:29092}
spring.kafka.consumer.group-id=pix-worker-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false

# Topics
kafka.topics.transactions=pix-transactions
kafka.topics.results=pix-results
kafka.topics.notifications=pix-notifications
kafka.topics.dlq=pix-dlq

# =============================================================================
# PIX Worker Settings
# =============================================================================
pix.worker.max-retries=3

# =============================================================================
# External Services
# =============================================================================
bancocentral.service.url=${BANCOCENTRAL_SERVICE_URL:http://bancocentral-service:8085}

# =============================================================================
# Database (for transaction status updates)
# =============================================================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/dogbank}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:dogbank}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:dog1234}
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

# =============================================================================
# Actuator / Health
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.health.kafka.enabled=true

# =============================================================================
# Datadog Metrics
# =============================================================================
management.metrics.export.datadog.enabled=${DD_METRICS_ENABLED:false}
management.metrics.export.datadog.api-key=${DD_API_KEY:dummy-key-for-local-dev}
management.metrics.export.datadog.step=30s
management.metrics.tags.env=dogbank
management.metrics.tags.service=pix-worker

# =============================================================================
# Logging
# =============================================================================
logging.level.root=INFO
logging.level.com.dogbank.pixworker=INFO
logging.level.org.apache.kafka=WARN
logging.level.io.micrometer=ERROR
logging.level.io.netty=ERROR
logging.level.reactor.netty=ERROR
logging.level.io.lettuce=ERROR
logging.level.com.zaxxer.hikari=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
