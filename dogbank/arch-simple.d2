direction: down

title: DogBank Architecture

clients: {
  label: CLIENTS
  web: Web App
  mobile: Mobile
}

gateway: {
  label: NGINX GATEWAY
  https: HTTPS :443
  security: Security Layer
}

services: {
  label: MICROSERVICES
  auth: Auth :8088
  account: Account :8089
  transaction: Transaction :8084
  autorizador: Autorizador :8090 {
    style.fill: "#00b894"
  }
  ledger: Ledger :8091 {
    style.fill: "#00b894"
  }
  bancocentral: Banco Central :8085
  integration: Integration :8082
  notification: Notification :8083
}

data: {
  label: DATA
  postgres: PostgreSQL {
    shape: cylinder
  }
}

clients.web -> gateway.https
clients.mobile -> gateway.https
gateway.https -> gateway.security
gateway.security -> services.auth
gateway.security -> services.account
gateway.security -> services.transaction
gateway.security -> services.autorizador
gateway.security -> services.ledger
gateway.security -> services.bancocentral
gateway.security -> services.integration
gateway.security -> services.notification

services.auth -> data.postgres
services.account -> data.postgres
services.transaction -> data.postgres
services.autorizador -> data.postgres
services.ledger -> data.postgres
services.bancocentral -> data.postgres

services.transaction -> services.bancocentral
services.transaction -> services.autorizador
services.transaction -> services.ledger
